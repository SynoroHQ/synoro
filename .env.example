# Since .env is gitignored, you can use .env.example to build a new `.env` file when you clone the repo.
# Keep this file up-to-date when you add new variables to \`.env\`.

# This file will be committed to version control, so make sure not to have any secrets in it.
# If you are cloning this repo, create a copy of this file named `.env` and populate it with your secrets.

# The database URL is used to connect to your Supabase database.
POSTGRES_URL="postgres://postgres.[USERNAME]:[PASSWORD]@aws-0-eu-central-1.pooler.supabase.com:6543/postgres?workaround=supabase-pooler.vercel"

# Optional: neon/self-host selector
DATABASE_TYPE=""

# App URLs (required for API/auth and CSRF)
APP_URL="http://localhost:3000"
WEB_APP_URL="http://localhost:3001"
EMAIL_FROM="no-reply@example.com"


# Better Auth
# You can generate the secret via 'openssl rand -base64 32' on Unix
# @see https://www.better-auth.com/docs/installation
BETTER_AUTH_SECRET='replace-me'
BETTER_AUTH_URL="http://localhost:3000"
AUTH_DOMAIN="localhost"
PORT="3000"

# Preconfigured Discord OAuth provider, works out-of-the-box
# @see https://www.better-auth.com/docs/authentication/discord
AUTH_DISCORD_ID=''
AUTH_DISCORD_SECRET=''

# Google OAuth (optional)
AUTH_GOOGLE_CLIENT_ID=""
AUTH_GOOGLE_CLIENT_SECRET=""

# Resend (email)
RESEND_API_KEY=""

# Telegram Bot (tg-bot)
# Получите токен у @BotFather
TELEGRAM_BOT_TOKEN=""
AI_PROVIDER="openai" # or "moonshot"

# OpenAI API для транскрибации аудио
OPENAI_API_KEY=""
# Модель для транскрибации: whisper-1 или gpt-4o-mini-transcribe
# Если не указать, используется whisper-1
OPENAI_TRANSCRIBE_MODEL=""
# Модель для генерации советов: например gpt-4o-mini
OPENAI_ADVICE_MODEL=""

# Moonshot AI (опционально)
MOONSHOT_API_KEY=""
MOONSHOT_TRANSCRIBE_MODEL=""
MOONSHOT_ADVICE_MODEL=""

# Промпты управляются в коде через пакет @synoro/prompts (реестр и ключи в коде)

# Langfuse (для трассировки Vercel AI SDK через OpenTelemetry)
# Получите ключи в Langfuse Dashboard -> Project Settings
# EU: https://cloud.langfuse.com, US: https://us.cloud.langfuse.com
LANGFUSE_SECRET_KEY=""
LANGFUSE_PUBLIC_KEY=""
LANGFUSE_BASEURL="https://cloud.langfuse.com"

# Telegram Bot Security (опционально)
# Разрешённые чаты (список chat_id через запятую). Если пусто — разрешены все чаты.
TG_ALLOWED_CHAT_IDS="" # например: "123456789,987654321"
# Лимиты для rate limiting (по умолчанию 30 событий за 60 сек на пару chat+user)
TG_RATE_LIMIT_WINDOW_MS="60000"
TG_RATE_LIMIT_LIMIT="30"
# Ограничения входных данных
TG_MESSAGE_MAX_LENGTH="3000" # макс. длина текста
TG_AUDIO_MAX_BYTES="8388608"  # 8 МБ
TG_AUDIO_MAX_DURATION_SEC="120" # 2 минуты
# Таймаут скачивания файлов Telegram (мс)
TG_FETCH_TIMEOUT_MS=""

# S3 / MinIO storage (for voice/audio storage)
# If you use AWS S3, set AWS_REGION/ACCESS_KEY/SECRET and bucket name.
# If you use local MinIO from docker-compose, set endpoint to http://localhost:9000 and force path style to true.
AWS_S3_BUCKET="synoro-bucket"
AWS_REGION="us-east-1"
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""
# For MinIO/local S3-compatible
AWS_S3_ENDPOINT="" # e.g. http://localhost:9000
AWS_S3_FORCE_PATH_STYLE="true"