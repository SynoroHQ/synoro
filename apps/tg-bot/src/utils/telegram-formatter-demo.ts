/**
 * –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è Telegram
 * –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –±—É–¥—É—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
 */

import { formatAgentResponse, formatForTelegram } from "./telegram-formatter";

/**
 * –î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
 */
export function demonstrateTelegramFormatting() {
  console.log("üé® –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è Telegram");
  console.log("=".repeat(60));

  // –ü—Ä–∏–º–µ—Ä 1: –û–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç
  console.log("\nüìù –ü—Ä–∏–º–µ—Ä 1: –û–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç");
  const simpleResponse = "–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.";
  const formatted1 = formatForTelegram(simpleResponse);
  console.log("–û—Ä–∏–≥–∏–Ω–∞–ª:", simpleResponse);
  console.log("–û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–æ:", formatted1.text);
  console.log("–†–µ–∂–∏–º –ø–∞—Ä—Å–∏–Ω–≥–∞:", formatted1.parse_mode || "–Ω–µ—Ç");

  // –ü—Ä–∏–º–µ—Ä 2: –û—Ç–≤–µ—Ç —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
  console.log("\nüìù –ü—Ä–∏–º–µ—Ä 2: –û—Ç–≤–µ—Ç —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏");
  const headerResponse = `–ê–Ω–∞–ª–∏–∑ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- –î–æ—Ö–æ–¥—ã: 50000 —Ä—É–±–ª–µ–π
- –†–∞—Å—Ö–æ–¥—ã: 35000 —Ä—É–±–ª–µ–π
- –≠–∫–æ–Ω–æ–º–∏—è: 15000 —Ä—É–±–ª–µ–π

–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è
2. –£–≤–µ–ª–∏—á–∏—Ç—å –¥–æ—Ö–æ–¥—ã –æ—Ç –ø–æ–¥—Ä–∞–±–æ—Ç–∫–∏
3. –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥`;

  const formatted2 = formatForTelegram(headerResponse);
  console.log("–û—Ä–∏–≥–∏–Ω–∞–ª:", headerResponse);
  console.log("–û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–æ:", formatted2.text);
  console.log("–†–µ–∂–∏–º –ø–∞—Ä—Å–∏–Ω–≥–∞:", formatted2.parse_mode || "–Ω–µ—Ç");

  // –ü—Ä–∏–º–µ—Ä 3: –û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π
  console.log("\nüìù –ü—Ä–∏–º–µ—Ä 3: –û—Ç–≤–µ—Ç —Å –æ—à–∏–±–∫–æ–π");
  const errorResponse = "–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.";
  const formatted3 = formatForTelegram(errorResponse);
  console.log("–û—Ä–∏–≥–∏–Ω–∞–ª:", errorResponse);
  console.log("–û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–æ:", formatted3.text);
  console.log("–†–µ–∂–∏–º –ø–∞—Ä—Å–∏–Ω–≥–∞:", formatted3.parse_mode || "–Ω–µ—Ç");

  // –ü—Ä–∏–º–µ—Ä 4: –û—Ç–≤–µ—Ç —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Ä–º–∏–Ω–∞–º–∏
  console.log("\nüìù –ü—Ä–∏–º–µ—Ä 4: –û—Ç–≤–µ—Ç —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Ç–µ—Ä–º–∏–Ω–∞–º–∏");
  const techResponse = `–°–∏—Å—Ç–µ–º–∞ Synoro –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- Next.js 14.0.0 –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- tRPC –¥–ª—è API
- Drizzle ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- Bun –∫–∞–∫ JavaScript runtime`;

  const formatted4 = formatForTelegram(techResponse);
  console.log("–û—Ä–∏–≥–∏–Ω–∞–ª:", techResponse);
  console.log("–û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–æ:", formatted4.text);
  console.log("–†–µ–∂–∏–º –ø–∞—Ä—Å–∏–Ω–≥–∞:", formatted4.parse_mode || "–Ω–µ—Ç");

  // –ü—Ä–∏–º–µ—Ä 5: –û—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
  console.log("\nüìù –ü—Ä–∏–º–µ—Ä 5: –û—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º");
  const agentResponse = `–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω:
–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —ç–∫–æ–Ω–æ–º–∏–∏ –≤ —Ä–∞–∑–º–µ—Ä–µ 25000 —Ä—É–±–ª–µ–π –≤ –º–µ—Å—è—Ü.
–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
‚Ä¢ –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤
‚Ä¢ –ü–µ—Ä–µ—Å–º–æ—Ç—Ä –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ —Å–µ—Ä–≤–∏—Å—ã
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤`;

  const formatted5 = formatAgentResponse(agentResponse, "financial-advisor", {
    addContextInfo: true,
    addSeparators: true,
  });
  console.log("–û—Ä–∏–≥–∏–Ω–∞–ª:", agentResponse);
  console.log("–û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–æ:", formatted5.text);
  console.log("–†–µ–∂–∏–º –ø–∞—Ä—Å–∏–Ω–≥–∞:", formatted5.parse_mode || "–Ω–µ—Ç");

  // –ü—Ä–∏–º–µ—Ä 6: –î–ª–∏–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º —Å—Ç—Ä–æ–∫
  console.log("\nüìù –ü—Ä–∏–º–µ—Ä 6: –î–ª–∏–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç —Å –ø–µ—Ä–µ–Ω–æ—Å–æ–º —Å—Ç—Ä–æ–∫");
  const longResponse = "–≠—Ç–æ –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ —á—Ç–µ–Ω–∏—è –≤ Telegram. –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –≤–∫–ª—é—á–∞—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏, —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –ø–µ—Ä–µ–Ω–æ—Å–æ–≤ —Å—Ç—Ä–æ–∫ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.";

  const formatted6 = formatForTelegram(longResponse, {
    maxLineLength: 60,
    addSeparators: true,
  });
  console.log("–û—Ä–∏–≥–∏–Ω–∞–ª:", longResponse);
  console.log("–û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–æ:", formatted6.text);
  console.log("–†–µ–∂–∏–º –ø–∞—Ä—Å–∏–Ω–≥–∞:", formatted6.parse_mode || "–Ω–µ—Ç");

  console.log("\n‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!");
  console.log("–í—Å–µ –æ—Ç–≤–µ—Ç—ã —Ç–µ–ø–µ—Ä—å –±—É–¥—É—Ç –∫—Ä–∞—Å–∏–≤–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Telegram");
}

/**
 * –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞–≥–µ–Ω—Ç–æ–≤
 */
export function testAgentSpecificFormatting() {
  console.log("\nü§ñ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞–≥–µ–Ω—Ç–æ–≤");
  console.log("=".repeat(60));

  const testResponse = "–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—É.";

  const agentTypes = [
    "qa-specialist",
    "financial-advisor",
    "data-analyst",
    "event-processor",
    "task-manager",
  ];

  agentTypes.forEach((agentType) => {
    const formatted = formatAgentResponse(testResponse, agentType);
    console.log(`\n${agentType}:`);
    console.log("  –û—Ç–≤–µ—Ç:", formatted.text);
    console.log("  –†–µ–∂–∏–º:", formatted.parse_mode || "–Ω–µ—Ç");
  });
}

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
export default {
  demonstrateTelegramFormatting,
  testAgentSpecificFormatting,
};
