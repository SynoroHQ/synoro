# –ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Synoro AI

## –û–±–∑–æ—Ä

–ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Synoro AI - —ç—Ç–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö [Vercel AI SDK](https://ai-sdk.dev/docs/foundations/agents). –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **Router Agent** - –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∫ –ø–æ–¥—Ö–æ–¥—è—â–∏–º –∞–≥–µ–Ω—Ç–∞–º
2. **Q&A Specialist Agent** - –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Å–∏—Å—Ç–µ–º–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
3. **Event Processor Agent** - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è (–ø–æ–∫—É–ø–∫–∏, –∑–∞–¥–∞—á–∏, –≤—Å—Ç—Ä–µ—á–∏)
4. **Task Orchestrator Agent** - –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –º–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–µ –∑–∞–¥–∞—á–∏
5. **Quality Evaluator Agent** - –û—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏ —É–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏–∑ AI SDK:

- **Sequential Processing** - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —ç—Ç–∞–ø–æ–≤
- **Parallel Processing** - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∑–∞–¥–∞—á
- **Routing** - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
- **Evaluation-Optimization Loops** - –¶–∏–∫–ª—ã –æ—Ü–µ–Ω–∫–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
- **Multi-Step Tool Usage** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–≥–æ–≤

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

```env
# –í .env —Ñ–∞–π–ª–µ Telegram –±–æ—Ç–∞
TG_USE_AGENT_SYSTEM=true
TG_AGENT_AUTO_MODE=true
```

### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

```typescript
// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å –∞–≥–µ–Ω—Ç–∞–º–∏ –¥–ª—è –≤–µ–±/–º–æ–±–∏–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
await api.messages.processMessageAgents.processMessageWithAgents.mutate({
  text: "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –º–æ–∏ —Ä–∞—Å—Ö–æ–¥—ã",
  channel: "web",
  agentOptions: {
    useQualityControl: true,
    targetQuality: 0.8,
  },
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è Telegram
await api.messages.processMessageAgents.processMessageFromTelegramWithAgents.mutate(
  {
    text: "–ö—É–ø–∏–ª —Ö–ª–µ–± –∑–∞ 45 —Ä—É–±–ª–µ–π",
    channel: "telegram",
    chatId: "123",
    telegramUserId: "456",
  },
);

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–≥–µ–Ω—Ç–æ–≤
const stats = await api.messages.processMessageAgents.getAgentStats.query();
```

### Telegram –∫–æ–º–∞–Ω–¥—ã

- `/agents` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ
- `/agent_test` - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∞–≥–µ–Ω—Ç–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è:

- –î–ª–∏–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (>100 —Å–∏–º–≤–æ–ª–æ–≤)
- –°–ª–æ–∂–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ (–∞–Ω–∞–ª–∏–∑, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –§–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∞–Ω–∞–ª–∏–∑–æ–º
- –ó–∞–ø—Ä–æ—Å–æ–≤ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏

## –ê–≥–µ–Ω—Ç—ã

### Router Agent

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∏–ø–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- –í—ã–±–æ—Ä –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∞–≥–µ–Ω—Ç–∞
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∑–∞–¥–∞—á–∏

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã:**

- `question` - –í–æ–ø—Ä–æ—Å—ã
- `event` - –°–æ–±—ã—Ç–∏—è –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `chat` - –û–±—ã—á–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ
- `complex_task` - –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏
- `irrelevant` - –°–ø–∞–º/–±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### Telegram Formatter Agent

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è Telegram
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Markdown —Ä–∞–∑–º–µ—Ç–∫–∏ –∏ —ç–º–æ–¥–∑–∏
- –£–ª—É—á—à–µ–Ω–∏–µ —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É—á–∞—Å—Ç–∏–µ:**

`TelegramFormatterAgent` —Ç–µ–ø–µ—Ä—å **–≤—Å–µ–≥–¥–∞ —É—á–∞—Å—Ç–≤—É–µ—Ç** –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è Telegram:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞, `TelegramFormatterAgent` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –¥–ª—è Telegram
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ—Ü–µ—Å—Å**: –ê–≥–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ `AgentManager.processMessage()`
3. **–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞**: –î–æ–±–∞–≤–ª—è–µ—Ç —ç–º–æ–¥–∑–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ Markdown —Ä–∞–∑–º–µ—Ç–∫—É –¥–ª—è –ª—É—á—à–µ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è

**–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã:**

```typescript
// –í AgentManager.processMessage() –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:
if (context.channel === "telegram" && finalResponse) {
  const telegramFormatter = this.getAgent("telegram-formatter");
  if (telegramFormatter) {
    const formattingTask = this.createAgentTask(
      finalResponse,
      "telegram-formatting",
      context,
      1,
    );

    const formattingResult = await telegramFormatter.process(
      formattingTask,
      telemetry,
    );
    if (formattingResult.success && formattingResult.data) {
      result.finalResponse = formattingResult.data; // –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
      agentsUsed.push(telegramFormatter.name);
    }
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –í—Å–µ –æ—Ç–≤–µ—Ç—ã –¥–ª—è Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è
- –£–ª—É—á—à–µ–Ω–Ω–∞—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å —Å —ç–º–æ–¥–∑–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π —Å—Ç–∏–ª—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è
- –ê–≥–µ–Ω—Ç –≤—Å–µ–≥–¥–∞ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ (–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω)

### Q&A Specialist Agent

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –û—Ç–≤–µ—Ç—ã –æ —Ñ—É–Ω–∫—Ü–∏—è—Ö –±–æ—Ç–∞
- –ü–æ–º–æ—â—å –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã
- –û–±—â–∏–µ –∑–Ω–∞–Ω–∏—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º Synoro

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**

- –ü–æ–∏—Å–∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

### Event Processor Agent

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –ü–∞—Ä—Å–∏–Ω–≥ –ø–æ–∫—É–ø–æ–∫ —Å —Å—É–º–º–∞–º–∏
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –∏ –≤—Å—Ç—Ä–µ—á
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**

- –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### Task Orchestrator Agent

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –¥—Ä—É–≥–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**

- –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
- –û—Ü–µ–Ω—â–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞

### Quality Evaluator Agent

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- –û—Ü–µ–Ω–∫–∞ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º (—Ç–æ—á–Ω–æ—Å—Ç—å, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å, –ø–æ–ª–Ω–æ—Ç–∞)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π
- –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

**–ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞:**

- Accuracy (—Ç–æ—á–Ω–æ—Å—Ç—å)
- Relevance (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å)
- Completeness (–ø–æ–ª–Ω–æ—Ç–∞)
- Clarity (—è—Å–Ω–æ—Å—Ç—å)
- Helpfulness (–ø–æ–ª–µ–∑–Ω–æ—Å—Ç—å)

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û–ø—Ü–∏–∏ –∞–≥–µ–Ω—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

```typescript
interface AgentOptions {
  forceAgentMode?: boolean; // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –∞–≥–µ–Ω—Ç–Ω—ã–π —Ä–µ–∂–∏–º
  useQualityControl?: boolean; // –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true)
  maxQualityIterations?: number; // –ú–∞–∫—Å. –∏—Ç–µ—Ä–∞—Ü–∏–π —É–ª—É—á—à–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2)
  targetQuality?: number; // –¶–µ–ª–µ–≤–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ 0-1 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0.8)
}
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# Telegram –±–æ—Ç
TG_USE_AGENT_SYSTEM=true           # –í–∫–ª—é—á–∏—Ç—å –∞–≥–µ–Ω—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É
TG_AGENT_AUTO_MODE=true            # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞

# API (–Ω–∞—Å–ª–µ–¥—É–µ—Ç –æ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö)
AI_PROVIDER=openai                 # –ü—Ä–æ–≤–∞–π–¥–µ—Ä AI (openai/moonshot)
OPENAI_API_KEY=your_key           # OpenAI API –∫–ª—é—á
OPENAI_ADVICE_MODEL=gpt-5-nano   # –ú–æ–¥–µ–ª—å –¥–ª—è —Å–æ–≤–µ—Ç–æ–≤
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```
ü§ñ [AGENTS] –ö–æ–Ω—Ç–µ–∫—Å—Ç –±–µ—Å–µ–¥—ã: 3 —Å–æ–æ–±—â–µ–Ω–∏—è (ID: conv-123)
üîç [AGENTS] –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º...
‚è±Ô∏è [AGENTS] –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è: 150ms ‚Üí question (0.92)
üöÄ [AGENTS] –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–≥–µ–Ω—Ç–∞–º–∏: 800ms (—Ä–µ–∂–∏–º: agents)
ü§ñ [AGENTS] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –∞–≥–µ–Ω—Ç—ã: Router Agent ‚Üí Q&A Specialist ‚Üí Quality Evaluator
üìä [AGENTS] –ö–∞—á–µ—Å—Ç–≤–æ: 0.89, —à–∞–≥–æ–≤: 3
‚úÖ [AGENTS] –°–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: —Ä–µ–∂–∏–º=agents, –∞–≥–µ–Ω—Ç—ã=Router Agent‚ÜíQ&A Specialist, –∫–∞—á–µ—Å—Ç–≤–æ=0.89
```

### –ú–µ—Ç—Ä–∏–∫–∏ –≤ –æ—Ç–≤–µ—Ç–µ

```typescript
interface AgentMetadata {
  agentsUsed: string[]; // –°–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
  totalSteps: number; // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤
  qualityScore: number; // –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (0-1)
  processingTime: number; // –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ –º—Å
  processingMode: "agents" | "legacy"; // –†–µ–∂–∏–º –æ–±—Ä–∞–±–æ—Ç–∫–∏
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –ò–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ packages/api
bun run src/scripts/test-agents.ts
```

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

```typescript
const testMessages = [
  "–ß—Ç–æ —Ç—ã —É–º–µ–µ—à—å?", // Q&A Agent
  "–ö—É–ø–∏–ª —Ö–ª–µ–± –∑–∞ 45 —Ä—É–±–ª–µ–π", // Event Processor
  "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?", // Chat Assistant
  "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —Ä–∞—Å—Ö–æ–¥—ã –∏ –¥–∞–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏", // Task Orchestrator
  "–°–∫–æ–ª—å–∫–æ —è –ø–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã?", // Data Analysis
];
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

- –ü—Ä–æ—Å—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è legacy —Å–∏—Å—Ç–µ–º–æ–π (–±—ã—Å—Ç—Ä–µ–µ)
- –°–ª–æ–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫ –∞–≥–µ–Ω—Ç–∞–º (–≤—ã—à–µ –∫–∞—á–µ—Å—Ç–≤–æ)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∑–∞–¥–∞—á

### –¢–∞–π–º–∞—É—Ç—ã –∏ –ª–∏–º–∏—Ç—ã

- –ú–∞–∫—Å–∏–º—É–º 5 –∏—Ç–µ—Ä–∞—Ü–∏–π —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
- –¢–∞–π–º–∞—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏: 30 —Å–µ–∫—É–Ω–¥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –∫ legacy —Ä–µ–∂–∏–º—É –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å, –Ω–∞—Å–ª–µ–¥—É—é—â–∏–π `AbstractAgent`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã `canHandle()` –∏ `process()`
3. –î–æ–±–∞–≤—å—Ç–µ –∞–≥–µ–Ω—Ç–∞ –≤ `AgentManager`
4. –û–±–Ω–æ–≤–∏—Ç–µ `RouterAgent` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞

### –ü—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞

```typescript
export class CustomAgent extends AbstractAgent {
  name = "Custom Agent";
  description = "–û–ø–∏—Å–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞";
  capabilities = [
    {
      name: "Custom Capability",
      description: "–û–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏",
      category: "custom",
      confidence: 0.9,
    },
  ];

  async canHandle(task: AgentTask): Promise<boolean> {
    return task.type === "custom";
  }

  async process(
    task: AgentTask,
    telemetry?: AgentTelemetry,
  ): Promise<AgentResult> {
    // –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    return this.createSuccessResult("–†–µ–∑—É–ª—å—Ç–∞—Ç", 0.9);
  }
}
```

## –ú–∏–≥—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ—Ö–æ–¥ —Å legacy —Å–∏—Å—Ç–µ–º—ã

1. –í–∫–ª—é—á–∏—Ç–µ –∞–≥–µ–Ω—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–π –≥—Ä—É–ø–ø–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
4. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Ä–∞—Å—à–∏—Ä—è–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞—è:

- Legacy —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞–µ–≤
- –ê–≥–µ–Ω—Ç–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞.
